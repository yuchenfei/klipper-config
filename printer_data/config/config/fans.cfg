[temperature_sensor raspberry_pi]
sensor_type: temperature_host
min_temp: 0
max_temp: 100

[temperature_sensor mcu_temp]
sensor_type: temperature_mcu
min_temp: 0
max_temp: 100

## Defined in temperature_fan
[temperature_sensor chamber]
sensor_type: NTC 100K MGB18-104F39050L32
sensor_pin: PC2
min_temp: 0
max_temp: 120
# gcode_id: C

##--------------------------------------------------------------------
## https://github.com/makerbase-mks/MKS-Monster8/blob/main/hardware/MKS%20Monster8%20V2.0_003/MKS%20Monster8%20V2.0_003%20PIN.pdf
## https://forum.vorondesign.com/threads/might-be-useful-pi-fan-option.1684/

##  Hotend Fan - FAN2 Connector
[heater_fan hotend_fan]
pin: PA0
max_power: 1.0
heater: extruder
heater_temp: 50.0
fan_speed: 0.5

##  Print Cooling Fan - FAN1 Connector
[fan]
pin: PA1
##  Depending on your fan, you may need to increase this value
##  if your fan will not start. Can change cycle_time (increase)
##  if your fan is not able to slow down effectively
off_below: 0.10

## Exhaust Fan - FAN0 Connector
[duplicate_pin_override] # allow reuse of pins
pins: PA2

[fan_generic exhaust_fan]
pin: PA2

[gcode_macro EXHAUST_ON]
gcode:
    SET_FAN_SPEED FAN=exhaust_fan SPEED=1

[gcode_macro EXHAUST_OFF]
gcode:
    SET_FAN_SPEED FAN=exhaust_fan SPEED=0

## https://docs.vorondesign.com/community/howto/alchemyEngine/chamber_temperature_exhaust_fan.html
#[temperature_fan chamber]
#pin: PA2
#max_power: 1.0
#shutdown_speed: 0.0
#kick_start_time: 5.0
#cycle_time: 0.01
#off_below: 0.1
#sensor_type: NTC 100K MGB18-104F39050L32
#sensor_pin: PC2
#min_temp: 0
#max_temp: 70
#target_temp: 35.0
#control: watermark
#gcode_id: C

[gcode_macro M141]
gcode:
    {% set s = params.S|default(0)|float %}
    SET_TEMPERATURE_FAN_TARGET temperature_fan="chamber" target={s}

## Nevermore Filter Fan - HE2 Connector
[fan_generic nevermore]
pin: PA3
max_power: 1.0
shutdown_speed: 1.0
kick_start_time: 3.0

[gcode_macro NEVERMORE_TOGGLE]
gcode:
    {% if printer['fan_generic Nevermore'].speed > 0 %}
      SET_FAN_SPEED FAN=nevermore SPEED=0
    {% else %}
      SET_FAN_SPEED FAN=nevermore SPEED=1
    {% endif %}

[gcode_macro NEVERMORE_ON]
gcode:
    SET_FAN_SPEED FAN=nevermore SPEED=1

[gcode_macro NEVERMORE_OFF]
gcode:
    SET_FAN_SPEED FAN=nevermore SPEED=0

##  Power Fan - HE1 Connector
[controller_fan power_fan]
pin: PB0
shutdown_speed: 1.0
fan_speed: 0.5
idle_timeout: 120
